<core:FragmentDefinition
	xmlns="sap.ui.table"
	xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"    
    xmlns:r="sap.suite.ui.microchart"
	xmlns:l="sap.ui.layout" 
	xmlns:m="sap.m"
	xmlns:form="sap.ui.layout.form"
	xmlns:fb="sap.ui.comp.filterbar"
    xmlns:ux="sap.uxap"
	xmlns:f="sap.f">
	
		<l:VerticalLayout>		
			<form:SimpleForm id="SimpleFormFacturas"
			editable="true"
			layout="ResponsiveGridLayout"
			title="Facturas">
			<form:content>
				<fb:FilterBar showGoOnFB="false" showFilterConfiguration="false" id="filterbarFactura" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" >
					<fb:filterGroupItems>
						
						<fb:FilterGroupItem id="filterGroupItemIdFactura" name="NameFactura" label="Factura" groupName="Group1" visibleInFilterBar="true">
							<fb:control>
								<m:Input id="inputFactura" name="Factura"/>												
							</fb:control>
						</fb:FilterGroupItem>

						<fb:FilterGroupItem id="filterGroupItemDesdeFacturas" name="FechaDesde" label="Fecha desde" groupName="Group2" visibleInFilterBar="true">
							<fb:control>
								<m:DatePicker
									id="fechaDesdePickerFacturas"											
									valueFormat="dd/MM/yyyy"
									displayFormat="dd/MM/yyyy"
								/>											
							</fb:control>
						</fb:FilterGroupItem>

						<fb:FilterGroupItem id="filterGroupItemHastaFacturas" name="Fecha" label="Fecha hasta" groupName="Group2" visibleInFilterBar="true">
							<fb:control>
								<m:DatePicker
									id="fechaHastaPickerFacturas"											
									valueFormat="dd/MM/yyyy"
									displayFormat="dd/MM/yyyy"/>											
							</fb:control>
						</fb:FilterGroupItem>
						
					</fb:filterGroupItems>
				</fb:FilterBar>

				<l:VerticalLayout class="sapUiSmallMarginTop" >					
					<m:Button text="Buscar" press="onFilterFacturas"/>
				</l:VerticalLayout>	
			
			</form:content>
		</form:SimpleForm>

		<Table
			id="tableFacturas"						
			rows="{path: '/ZI_BillingDocument'}"	
			selectionMode="None">
				<extension>
				<m:OverflowToolbar  style="Clear">
					<m:ToolbarSpacer/>
					
					<m:Input id="inputSearchFacturas"
						placeholder="Buscar" width="10rem" class="sapUiMediumMarginEnd" liveChange="onSearchFacturas" />							
						</m:OverflowToolbar>
				</extension>
				<columns>

					<Column id="columnDocumentoFactura" width="7rem" sortProperty="BillingDocument" >
						<m:Label id="labelDocumentoFactura" text="DocFactura"/>
						<template>
								<m:Text id="textDocumentoFactura" text="{BillingDocument}"/>	
						</template>									
					</Column>

					<Column id="columnPedidoFactura" width="7rem" sortProperty="Vbeln" >
						<m:Label id="labelPedidoFactura" text="Pedido"/>
						<template>
								<m:Link id="linkPedidoFactura" text="{Vbeln}" press="handleLinkPedido"/>	
						</template>									
					</Column>

					<Column id="columnCondDePagoFactura" width="10rem" sortProperty="CustomerPaymentTermsName" >
						<m:Label id="labelCondDePagoFactura" text="Condicion de Pago"/>
						<template>
								<m:Text id="textCondDePagoFactura" text="{CustomerPaymentTermsName}" />		
						</template>									
					</Column>

					<Column id="columnMonedaFactura" width="5rem" sortProperty="TransactionCurrency">
						<m:Label id="labelMonedaFactura" text="Moneda"/>
						<template>
							<m:Text id="textMonedaFactura" text="{TransactionCurrency}" />								
						</template>
					</Column>

					<Column id="columFechaFactura" width="6rem" sortProperty="CreationDate" >
						<m:Label id="labelFechaFactura"   text="Fecha"/>
						<template>
							<m:Text id="textFechaFactura" text="{path:'CreationDate' , formatter:'.formatter.stringDate'}" />
						</template>
					</Column>

					<Column id="columnValorNetoFactura" sortProperty="TotalNetAmount" >
					<m:Label id="labelValorNetoFactura" text="Valor Neto"/>
					<template>
						<m:Text id="textValorNetoFactura" text="{path:'TotalNetAmount' , formatter:'.formatter.removeZeros'}" />								
					</template>
					</Column>

					<Column id="columnImporteDeImpuestoFactura" sortProperty="TotalTaxAmount">
						<m:Label id="labelImporteDeImpuestoFactura" text="Importe De Impuesto"/>
						<template>
							<m:Text id="textImporteDeImpuestoFactura" text="{path:'TaxAmount' , formatter:'.formatter.removeZeros'}" />								
						</template>
					</Column>

					<Column id="columnNLegalFactura" sortProperty="DocumentReferenceID">
						<m:Label id="labelNLegalFactura" text="NÂ°Legal de Factura"/>
						<template>
							<m:Text id="textNLegalFactura" text="{DocumentReferenceID}" />								
						</template>
					</Column>

				</columns>						
			</Table>
		</l:VerticalLayout>

</core:FragmentDefinition>